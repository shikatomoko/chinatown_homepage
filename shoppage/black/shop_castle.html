<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>城</title>
    <link rel="stylesheet" href="../../style.css">
    <link rel="stylesheet" href="../../common/styles.css">
    <link rel="stylesheet" href="../../common/navigation.css">
    <link rel="stylesheet" href="shopblack.css">
</head>
<body>
    <div id="navigation-placeholder"></div>
    <!-- ヘッダー部分（黒色背景） -->
    <div class="header">
        <h1 class="title">城</h1>
    </div>
    
    <!-- メインコンテンツ -->
    <div class="top-section">
        <!-- 店舗情報 -->
        <div class="shop-info">
            <p>所属組織：<a href="../../colorpage/black.html" class="color-link">黒</a></p>
            <p>場所：中央区 　従業員：城主／衛兵／書記官</p>
        </div>
        
        <!-- メイン画像部分 -->
        <div class="main-image-container">
            <img id="mainImage" class="main-image" src="../../shop_image/black/castle/castle.jpg" alt="城のメイン画像">
        </div>
        
        <!-- サブ画像スライダー -->
        <div class="sub-images-container">
            <div class="sub-images-scroll">
                <img class="sub-image active" src="../../shop_image/black/castle/castle.jpg" alt="城外観" onclick="changeMainImage(this)">
                <img class="sub-image" src="../../shop_image/black/castle/castle_spring.png" alt="城内部" onclick="changeMainImage(this)">
            </div>
        </div>
    </div>
    
    <!-- 下部コンテンツ（黒背景） -->
    <div class="bottom-content">
        <div class="content-section">
            <h2 class="section-title">概要</h2>
            <p class="section-text">暗黒中華街を見下ろすように建てられた巨大な城塞。外敵を防ぐ防御施設であると同時に、権威の象徴として機能している。内部には玉座の間や謁見室、牢獄、宝物庫が存在し、政治的・軍事的な中心となる。時に祝祭や裁判、公開処刑などもここで執り行われる。</p>
        </div>
        
        <div class="content-section">
            <h2 class="section-title">利用方法</h2>
            <div class="service-list">
                <div class="service-item">
                    <div class="service-title">謁見</div>
                    <div class="service-description">
                        城主や権力者に面会できる。重要な交渉や政治的な話し合いが行われる場。
                    </div>
                    <div class="service-mechanics">
                        ただし〈交渉〉や〈威圧〉などの判定が必要になる場合がある。面会の成否は準備と話術による。
                    </div>
                </div>
                <div class="service-item">
                    <div class="service-title">収監</div>
                    <div class="service-description">
                        罪人や政治犯が収監される牢獄。一度入ると脱出は困難。
                    </div>
                    <div class="service-mechanics">
                        条件によって収監される可能性がある。脱出には高度な技能や協力者が必要。
                    </div>
                </div>
                <div class="service-item">
                    <div class="service-title">公開処刑</div>
                    <div class="service-description">
                        重罪者の処刑が公開で行われる。見せしめの効果がある。
                    </div>
                    <div class="service-warning">
                        処刑の現場を目撃することで、精神的な影響を受ける可能性がある。
                    </div>
                </div>
            </div>
        </div>
        
        <div class="content-section">
            <h2 class="section-title">関係者</h2>
            <div class="person-list">
                <a href="../../characterpage/character_aren.html" class="person-item">
                    <div class="employee-icon">亞</div>
                    <div class="employee-info">
                        <div class="employee-name">阿廉（あれん）</div>
                        <div class="employee-role">城主</div>
                    </div>
                </a>
            </div>
        </div>
        
        <div class="content-section">
            <h2 class="section-title">その他の黒組店舗</h2>
            <button class="black-group-btn" onclick="showBlackGroupDetail()">黒組店舗一覧</button>
        </div>
    </div>
    
    <!-- 黒組詳細ポップアップ -->
    <div id="detail-black" class="group-detail">
        <button class="close-btn" onclick="hideGroupDetail()">&times;</button>
        <h3>黒組店舗</h3>
        <ul class="shop-list">
            <li>
                <img src="../../shop_image/black/castle/castle.jpg" alt="城" class="shop-icon">
                <a href="shop_castle.html">城</a>
            </li>
        </ul>
    </div>
    
    <div id="overlay" class="overlay"></div>

    <script>
        function changeMainImage(clickedImage) {
            const mainImage = document.getElementById('mainImage');
            const allSubImages = document.querySelectorAll('.sub-image');
            
            // メイン画像を変更
            mainImage.src = clickedImage.src;
            mainImage.alt = clickedImage.alt;
            
            // アクティブクラスを更新
            allSubImages.forEach(img => img.classList.remove('active'));
            clickedImage.classList.add('active');
        }
        
        function showBlackGroupDetail() {
            hideGroupDetail();
            
            const detail = document.getElementById('detail-black');
            const overlay = document.getElementById('overlay');
            
            if (detail && overlay) {
                detail.classList.add('active');
                overlay.classList.add('active');
                
                document.addEventListener('keydown', handleEscKey);
            }
        }
        
        function hideGroupDetail() {
            const detail = document.querySelector('.group-detail.active');
            const overlay = document.getElementById('overlay');
            
            if (detail) {
                detail.classList.remove('active');
            }
            
            if (overlay) {
                overlay.classList.remove('active');
            }
            
            document.removeEventListener('keydown', handleEscKey);
        }
        
        function handleEscKey(event) {
            if (event.key === 'Escape') {
                hideGroupDetail();
            }
        }
        
        // オーバーレイクリックで閉じる
        document.getElementById('overlay').addEventListener('click', hideGroupDetail);
    </script>
    <script src="../../common/navigation.js"></script>
</body>
</html>